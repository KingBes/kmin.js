async function impComp(t){try{var r=await fetch(t);if(!r.ok)throw new Error("Failed to fetch component: "+r.statusText);var n=await r.text(),a=(new DOMParser).parseFromString(n,"text/html"),l=n.match(/<template>([\s\S]*?)<\/template>/)[1];let e=a.querySelector("script").innerHTML;e=e.replace(/\s*class\s*extends\s*KMin\s*{/g,`class extends KMin { css() { return \`${a.querySelector("style").innerHTML}\`; } render() { return \`${l}\`; } `);var s=document.createElement("script");s.type="module",s.textContent=e,document.body.appendChild(s)}catch(e){console.error("Error fetching the component:",e)}}class KMin extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"});var e=new CSSStyleSheet;e.replaceSync(this.css()),this.shadowRoot.adoptedStyleSheets=[e],this.firstRender=!0,this.eventListeners=[]}state(e){const a=this;return new Proxy(e,{get(e,t,r){e=Reflect.get(e,t,r);return"object"==typeof e&&null!==e?a.state(e):e},set(e,t,r,n){return Reflect.set(e,t,r,n),a.updateComponent(),!0}})}updateComponent(){var e=this.render();this.#_processTemplate(e)}#_processTemplate(e){this.firstRender?(this.firstRender=!1,this.shadowRoot.innerHTML=this.#tpl(e)):domDiff(this.shadowRoot.childNodes,parseHTML(this.#tpl(e))),this.shadowRoot.querySelectorAll("[data-event]").forEach(t=>{const r=t.getAttribute("data-event").split(",");this.eventListeners.find(e=>e.element===t&&e.type===r[0])||(this.eventListeners.push({element:t,type:r[0],handler:e=>{this[r[1]]&&this[r[1]].call(this,e)}}),t.addEventListener(r[0],e=>{this[r[1]]&&this[r[1]].call(this,e)}))})}connectedCallback(){this.updateComponent()}#tpl(e){e=`let km_tpl = \`${e=e.replace(/\{\#if\s+([^}]*)\}/g,(e,t)=>"`;if("+kmComparison(t)+") {km_tpl+=`").replace(/\{\#else\s+if\s+([^}]*)\}/g,(e,t)=>"`;} else if("+kmComparison(t)+") {km_tpl+=`").replace(/\{\#else\}/g,"`;} else {km_tpl+=`").replace(/\{\/if\}/g,"`;}km_tpl+=`").replace(/\{\#for\s+([^}]*)}/g,(e,t)=>"`;for("+kmComparison(t)+") {km_tpl+=`").replace(/\{\/for\}/g,"`;}km_tpl+=`").replace(/\{\#each\s+([^}]+)\s+as\s+([^}]+)}/g,"`;$1.forEach(function($2){km_tpl+=`").replace(/\{\/each\}/g,"`;});km_tpl+=`").replace(/@([a-z]+)="([\w$]+)"/g,(e,t,r)=>`data-event="${t},${r}"`).replace(/\{\{([^}]*)\}\}/g,"${kmHtml($1)}").replace(/\{\#html\s+([^}]*)\}/g,"${kmHtml($1,false)}")}\`; return km_tpl;`;try{var t=Object.keys(this);return t.push("kmHtml"),new Function(...t,e)(...t.map(e=>this[e]))}catch(e){throw new Error("Template error, "+e.message)}}kmHtml(t,e=!0){if(null==t)return"";if("function"==typeof t)return kmHtml(t());if(Array.isArray(t)){var r=t.length,n=new Array(r);for(let e=0;e<r;e++)n[e]=kmHtml(t[e]);return n.join(",")}var a=String(t);if(!e)return a;const l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};e=/[&<>"']/g;return e.test(a)?a.replace(e,e=>l[e]):a}css(){return""}render(){return""}disconnectedCallback(){}adoptedCallback(){}attributeChangedCallback(e,t,r){}}function kmComparison(e){const t={eq:"==",neq:"!=",gt:">",egt:">=",lt:"<",elt:"<=",heq:"===",nheq:"!=="};var r=Object.keys(t).sort((e,t)=>t.length-e.length).map(e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")).join("|"),r=new RegExp(`\\b(${r})\\b`,"g");return e.replace(r,e=>t[e])}function parseHTML(e){var t=document.createElement("div");return t.innerHTML=e,t.childNodes}function domDiff(t,r){for(let e=0;e<t.length;e++){var n=t[e],a=r[e];if(a)if(3===n.nodeType||3===a.nodeType)n.nodeValue!==a.nodeValue&&(n.nodeValue=a.nodeValue);else if(n.nodeName!==a.nodeName)n.outerHTML=a.outerHTML;else{var l=n.attributes,s=a.attributes;for(let e=0;e<l.length;e++){var o=l[e],i=s[e];s[e]?(o.name!==i.name&&n.setAttribute(o.name,i.value),o.value!==i.value&&n.setAttribute(o.name,i.value)):n.removeAttribute(o.name)}for(let e=0;e<s.length;e++){var c=s[e];l[e]||n.setAttribute(c.name,c.value)}domDiff(n.childNodes,a.childNodes)}else n.removeChild(n.children[e])}if(r.length>t.length)for(let e=t.length;e<r.length;e++)t[0].parentNode.appendChild(r[e].cloneNode(!0))}