async function impComp(t){try{var r=await fetch(t);if(!r.ok)throw new Error("Failed to fetch component: "+r.statusText);var n=(new DOMParser).parseFromString(await r.text(),"text/html");let e=n.querySelector("script").innerHTML;e=e.replace(/\s*class\s*extends\s*KMin\s*{/g,`class extends KMin {
            css() {
                return \`${n.querySelector("style").innerHTML}\`;
            }
            render() {
                return \`${n.querySelector("template").innerHTML}\`;
            }
            `);var o=document.createElement("script");o.type="module",o.textContent=e,document.body.appendChild(o)}catch(e){console.error("Error fetching the component:",e)}}class KMin extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"});var e=new CSSStyleSheet;e.replaceSync(this.css()),this.shadowRoot.adoptedStyleSheets=[e],this.firstRender=!0}state(e){const o=this;return new Proxy(e,{get(e,t,r){e=Reflect.get(e,t,r);return"object"==typeof e&&null!==e?o.state(e):e},set(e,t,r,n){return Reflect.set(e,t,r,n),o.updateComponent(),!0}})}updateComponent(){var e=this.render();this.#_processTemplate(e)}#_processTemplate(e){this.firstRender?(this.firstRender=!1,this.shadowRoot.innerHTML=this.#tpl(e),this.shadowRoot.querySelectorAll("[data-event]").forEach(e=>{const t=e.getAttribute("data-event").split(",");e.addEventListener(t[0],e=>{this[t[1]]&&this[t[1]].call(this,e)}),e.removeAttribute("data-event")})):(e=diff(domToVNode(parseHTML(this.shadowRoot.innerHTML)),domToVNode(parseHTML(this.#tpl(e)))),applyPatches(this.shadowRoot,e))}connectedCallback(){this.updateComponent()}#tpl(e){e=`
            let km_tpl = \`${e=e.replace(/\{\#if\s+([^}]*)\}/g,(e,t)=>"`;if("+kmComparison(t)+") {km_tpl+=`").replace(/\{\#else\s+if\s+([^}]*)\}/g,(e,t)=>"`;} else if("+kmComparison(t)+") {km_tpl+=`").replace(/\{\#else\}/g,"`;} else {km_tpl+=`").replace(/\{\/if\}/g,"`;}km_tpl+=`").replace(/\{\#for\s+([^}]*)}/g,(e,t)=>"`;for("+kmComparison(t)+") {km_tpl+=`").replace(/\{\/for\}/g,"`;}km_tpl+=`").replace(/\{\#each\s+([^}]+)\s+as\s+([^}]+)}/g,"`;$1.forEach(function($2){km_tpl+=`").replace(/\{\/each\}/g,"`;});km_tpl+=`").replace(/@([a-z]+)="([\w$]+)"/g,(e,t,r)=>`data-event="${t},${r}"`).replace(/\{\{(\w+(\.\w+)*)\}\}/g,"${kmHtml($1)}").replace(/\{\#html\s+(\w+(\.\w+)*)\}/g,"${kmHtml($1,false)}")}\`;
            return km_tpl;`;try{var t=Object.keys(this);return t.push("kmHtml"),new Function(...t,e)(...t.map(e=>this[e]))}catch(e){throw new Error("Template error, "+e.message)}}kmHtml(t,e=!0){if(null==t)return"";if("function"==typeof t)return kmHtml(t());if(Array.isArray(t)){var r=t.length,n=new Array(r);for(let e=0;e<r;e++)n[e]=kmHtml(t[e]);return n.join(",")}var o=String(t);if(!e)return o;const a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};e=/[&<>"']/g;return e.test(o)?o.replace(e,e=>a[e]):o}css(){return""}render(){return""}disconnectedCallback(){}adoptedCallback(){}attributeChangedCallback(e,t,r){}}function kmComparison(e){const t={eq:"==",neq:"!=",gt:">",egt:">=",lt:"<",elt:"<=",heq:"===",nheq:"!=="};var r=Object.keys(t).sort((e,t)=>t.length-e.length).map(e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")).join("|"),r=new RegExp(`\\b(${r})\\b`,"g");return e.replace(r,e=>t[e])}function parseHTML(e){var t=document.createElement("div");return t.innerHTML=e,t.childNodes}class VNode{constructor(e,t={},r=[],n=null,o=null){this.tag=e,this.attrs=t,this.children=r,this.key=n,this.el=o}}function domToVNode(e){let s=[];return e.forEach((t,e)=>{var r=t.nodeName.toLowerCase(),n={};if(t.attributes)for(let e=0;e<t.attributes.length;e++){var o=t.attributes[e];n[o.name]=o.value}var a=domToVNode(t.childNodes);"#text"===r?s.push(t.textContent):s.push(new VNode(r,n,a,e,t))}),s}function diff(t,r){var n=[];for(let e=0;e<t.length;e++){var o,a=t[e],s=r[e];s?"string"==typeof a||"string"==typeof s?a!==s&&n.push({type:"UPDATE",index:e,oldNode:a,newNode:s}):a.tag!==s.tag?n.push({type:"REPLACE",index:e,oldNode:a,newNode:s}):(o=diffAttrs(a.attrs,s.attrs),0<Object.keys(o).length&&n.push({type:"ATTR",index:e,attrs:o}),0<(o=diff(a.children,s.children)).length&&n.push({type:"CHILDREN",index:e,patches:o})):n.push({type:"REMOVE",index:e,node:a})}for(let e=t.length;e<r.length;e++)n.push({type:"ADD",index:e,node:r[e]});return n}function diffAttrs(e,t){var r,n,o={};for(r in t)e[r]!==t[r]&&(o[r]=t[r]);for(n in e)t.hasOwnProperty(n)||(o[n]=void 0);return o}function applyPatches(t,e){e.forEach(e=>{switch(e.type){case"ADD":addNode(t,e.index,e.node);break;case"REMOVE":removeNode(t,e.index,e.node);break;case"UPDATE":updateNode(t,e.index,e.oldNode,e.newNode);break;case"REPLACE":replaceNode(t,e.index,e.oldNode,e.newNode);break;case"ATTR":updateAttrs(t,e.index,e.attrs);break;case"CHILDREN":applyPatches(t.childNodes[e.index],e.patches)}})}function addNode(e,t,r){r=createElement(r);t>=e.childNodes.length?e.appendChild(r):e.insertBefore(r,e.childNodes[t])}function removeNode(e,t,r){e.childNodes[t]&&e.removeChild(e.childNodes[t])}function updateNode(e,t,r,n){e.childNodes[t]&&(e.childNodes[t].textContent=n)}function replaceNode(e,t,r,n){e.childNodes[t]&&(n=createElement(n),e.replaceChild(n,e.childNodes[t]))}function updateAttrs(e,t,r){var n=e.childNodes[t];if(n)for(var o in r)void 0===r[o]?n.removeAttribute(o):n.setAttribute(o,r[o])}function createElement(e){if("string"==typeof e)return document.createTextNode(e);const t=document.createElement(e.tag);for(var r in e.attrs)t.setAttribute(r,e.attrs[r]);return e.children.forEach(e=>{t.appendChild(createElement(e))}),t}