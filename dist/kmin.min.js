let Comps=[];function regComp(t,e){Comps.find(e=>e===t)||(Comps.push(t),customElements.define(t,class extends KMin{constructor(){super(),e.call(this)}}))}async function impComp(e){regComp(e.split("/").pop().split(".")[0],(await import(e)).default)}class KMin extends HTMLElement{static version="v0.0.7";constructor(){super(),this.attachShadow({mode:"open"}),this.eventListeners=[]}reactive(e){const s=this;return new Proxy(e,{get(e,t,n){e=Reflect.get(e,t,n);return"object"==typeof e&&null!==e?s.reactive(e):e},set(e,t,n,o){return Reflect.set(e,t,n,o),s.updateComponent(),!0}})}ref(t){const n=this;return{get value(){return t},set value(e){e!==t&&(t=e,n.updateComponent())}}}updateComponent(){var e=this.render();this.#_processTemplate(e)}#_processTemplate(e){this.#diff(this.shadowRoot.childNodes,parseHTML(e)),this.#_processEvent()}#_processEvent(){this.shadowRoot.querySelectorAll("[data-event]").forEach(t=>{const n=t.getAttribute("data-event").split(",");t.removeAttribute("data-event"),this.eventListeners.find(e=>e.element===t&&e.type===n[0])||(this.eventListeners.push({element:t,type:n[0],handler:n[1]}),t.addEventListener(n[0],e=>{this[n[1]]&&this[n[1]].call(this,e,t)}))})}#diff(t,n){for(let e=0;e<t.length;e++){var o=t[e],s=n[e];if(s)if(3===o.nodeType||3===s.nodeType)o.nodeValue!==s.nodeValue&&(o.nodeValue=s.nodeValue);else if(o.nodeName!==s.nodeName)o.outerHTML=s.outerHTML;else{var r=o.attributes,i=s.attributes;if(void 0!==r)for(let e=0;e<r.length;e++){var a=r[e],l=i[e];i[e]?(a.name!==l.name&&o.setAttribute(a.name,l.value),a.value!==l.value&&o.setAttribute(a.name,l.value)):o.removeAttribute(a.name)}if(void 0!==i)for(let e=0;e<i.length;e++){var d=i[e];r[e]||o.setAttribute(d.name,d.value)}this.#diff(o.childNodes,s.childNodes)}else o.removeChild(o.children[e])}if(n.length>t.length)for(let e=t.length;e<n.length;e++)(t[0]?t[0].parentNode:this.shadowRoot).appendChild(n[e].cloneNode(!0))}connectedCallback(){this.updateComponent();var e=new CSSStyleSheet;e.replaceSync(this.css()),this.shadowRoot.adoptedStyleSheets=[e]}css(){return""}render(){return""}disconnectedCallback(){}adoptedCallback(){}attributeChangedCallback(e,t,n){}}function parseHTML(e){var t=document.createElement("div");return t.innerHTML=e,t.childNodes}class Event{constructor(e){this.component=e,this.Components=new Map,this.eventListeners=new Map}register(e,t){t="string"==typeof t?(this.component.shadowRoot||this.component).querySelector(t):t;return!!t&&(this.Components.set(e,t),!0)}call(t,n,...e){var o=this.Components.get(t);if(o){var s=o[n];if("function"!=typeof s)console.warn(`Method "${n}" not found in "${t}"`);else try{return s.apply(o,e)}catch(e){console.error(`Error calling "${n}" on "${t}":`,e)}}else console.warn(`Component "${t}" not registered`);return null}on(e,t,n){var o=this.Components.get(e);if(!o)return console.warn(`listen event failed, component "${e}" not register`);this.eventListeners.set(e+"-"+t,{child:o,eventName:t,handler:n}),o.addEventListener(t,n)}off(e,t){e=e+"-"+t,t=this.eventListeners.get(e);t&&(t.child.removeEventListener(t.eventName,t.handler),this.eventListeners.delete(e))}emit(e,t){this.component.dispatchEvent(new CustomEvent(e,{detail:t,bubbles:!0,composed:!0}))}destroy(){this.eventListeners.forEach(({child:e,eventName:t,handler:n})=>{e.removeEventListener(t,n)}),this.Components.clear(),this.eventListeners.clear()}}"undefined"!=typeof window&&(window.KMin=KMin,window.regComp=regComp,window.impComp=impComp,window.Event=Event);export{regComp,impComp,KMin,Event};